<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [server][1]
    -   [FactomServerIdentityManager][2]
        -   [Parameters][3]
        -   [Examples][4]
        -   [addCoinbaseCancel][5]
            -   [Parameters][6]
        -   [getServerIdentity][7]
            -   [Parameters][8]
        -   [getServerIdentityHistory][9]
            -   [Parameters][10]
        -   [updateCoinbaseAddress][11]
            -   [Parameters][12]
        -   [updateEfficiency][13]
            -   [Parameters][14]
    -   [generateCoinbaseAddressUpdateEntry][15]
        -   [Parameters][16]
    -   [generateCoinbaseCancelEntry][17]
        -   [Parameters][18]
    -   [generateEfficiencyUpdateEntry][19]
        -   [Parameters][20]
-   [digital][21]
    -   [FactomIdentityManager][22]
        -   [Parameters][23]
        -   [Examples][24]
        -   [createIdentity][25]
            -   [Parameters][26]
        -   [getActivePublicIdentityKeys][27]
            -   [Parameters][28]
        -   [getSecretIdentityKey][29]
            -   [Parameters][30]
        -   [isIdentityKeyActive][31]
            -   [Parameters][32]
        -   [replaceIdentityKey][33]
            -   [Parameters][34]
    -   [extractCryptoMaterial][35]
        -   [Parameters][36]
    -   [generateRandomIdentityKeyPair][37]
    -   [getPublicIdentityKey][38]
        -   [Parameters][39]
    -   [isValidIdentityKey][40]
        -   [Parameters][41]
    -   [isValidPublicIdentityKey][42]
        -   [Parameters][43]
    -   [isValidSecretIdentityKey][44]
        -   [Parameters][45]
    -   [keyToPublicIdentityKey][46]
        -   [Parameters][47]
    -   [seedToSecretIdentityKey][48]
        -   [Parameters][49]

## server

[src/server/index.js:6-6][50]

Module containing functions about Factom server identities.

### FactomServerIdentityManager

[src/server/factom-server-identity-manager.js:27-88][51]

Main class to read and write Factom identities.

#### Parameters

-   `opts` **[Object][52]?** Options of connection to factomd and factom-walletd.
    -   `opts.factomd` **[Object][52]?** Options of connection to factomd. See [https://factomjs.luciap.ca/#connectionoptions][53].
    -   `opts.walletd` **[Object][52]?** Options of connection to factom-walletd. See [https://factomjs.luciap.ca/#connectionoptions][53].

#### Examples

```javascript
const manager = new FactomServerIdentityManager({
     factomd: {
         host: 'api.factomd.net',
         port: 443,
         protocol: 'https'
     },
     walletd: {
         host: 'localhost',
         user: 'paul',
         password: 'pass'
     }
});
```

#### addCoinbaseCancel

[src/server/factom-server-identity-manager.js:85-87][54]

Add a coinbase cancel message to a server identity.

##### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.
-   `descriptorHeight` **[number][56]** Coinbase descriptor block height.
-   `descriptorIndex` **[number][56]** Coinbase descriptor index.
-   `sk1` **[string][55]** Server identity Secret Key 1.
-   `ecAddress` **[string][55]** Entry Credit address paying for the entry.

Returns **{txId: [string][55], repeatedCommit: [boolean][57], chainId: [string][55], entryHash: [string][55]}** Info about the Entry insertion.

#### getServerIdentity

[src/server/factom-server-identity-manager.js:38-40][58]

Get a server identity information.

##### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.

Returns **{rootChainId: [string][55], serverManagementSubchainId: [string][55], coinbaseAddress: [string][55], efficiency: [number][56], identityKeys: [Array][59]&lt;[string][55]>}** 

#### getServerIdentityHistory

[src/server/factom-server-identity-manager.js:48-50][60]

Get a server identity information history.

##### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.

Returns **{rootChainId: [string][55], serverManagementSubchainId: [string][55], coinbaseAddressHistory: [Array][59]&lt;[Object][52]>, efficiencyHistory: [Array][59]&lt;[Object][52]>, identityKeys: [Array][59]&lt;[string][55]>}** 

#### updateCoinbaseAddress

[src/server/factom-server-identity-manager.js:60-62][61]

Update the coinbase address of a server identity.

##### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.
-   `fctAddress` **[string][55]** Public Factoid address to set as coinbase address.
-   `sk1` **[string][55]** Server identity Secret Key 1.
-   `ecAddress` **[string][55]** Entry Credit address paying for the entry.

Returns **{txId: [string][55], repeatedCommit: [boolean][57], chainId: [string][55], entryHash: [string][55]}** Info about the Entry insertion.

#### updateEfficiency

[src/server/factom-server-identity-manager.js:72-74][62]

Update the efficiency of a server identity.

##### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.
-   `efficiency` **[number][56]** Efficiency between 0 and 100.
-   `sk1` **[string][55]** Server identity Secret Key 1.
-   `ecAddress` **[string][55]** Entry Credit address paying for the entry.

Returns **{txId: [string][55], repeatedCommit: [boolean][57], chainId: [string][55], entryHash: [string][55]}** Info about the Entry insertion.

### generateCoinbaseAddressUpdateEntry

[src/server/coinbase-address.js:95-107][63]

Generate Entry object to update a server identity coinbase address.

#### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.
-   `fctAddress` **[string][55]** Public Factoid address to set as the new coinbase address.
-   `sk1` **[string][55]** Server identity Secret Key 1.

### generateCoinbaseCancelEntry

[src/server/coinbase-cancel.js:41-78][64]

#### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.
-   `serverManagementSubchainId` **[string][55]** Server Management Subchain Id.
-   `height` **[number][56]** Block height of the coinbase descriptor to cancel.
-   `index` **[number][56]** Index of the coinbase descriptor to cancel.
-   `sk1` **[string][55]** Server identity Secret Key 1.

### generateEfficiencyUpdateEntry

[src/server/efficiency.js:97-115][65]

Generate Entry object to update a server identity efficiency.

#### Parameters

-   `rootChainId` **[string][55]** Identity Root Chain Id.
-   `serverManagementSubchainId` **[string][55]** Server Management Subchain Id.
-   `efficiency` **[number][56]** Efficiency between 0 and 100.
-   `sk1` **[string][55]** Server identity Secret Key 1.

Returns **{chainId: [Buffer][66], extIds: [Array][59]&lt;[Buffer][66]>, content: [Buffer][66]}** 

## digital

[src/digital/index.js:5-5][67]

Module containing functions about Factom digital identities.

### FactomIdentityManager

[src/digital/factom-identity-manager.js:28-103][68]

Main class to read and write Factom identities.

#### Parameters

-   `opts` **[Object][52]?** Options of connection to factomd and factom-walletd.
    -   `opts.factomd` **[Object][52]?** Options of connection to factomd. See [https://factomjs.luciap.ca/#connectionoptions][53].
    -   `opts.walletd` **[Object][52]?** Options of connection to factom-walletd. See [https://factomjs.luciap.ca/#connectionoptions][53].

#### Examples

```javascript
const manager = new FactomIdentityManager({
     factomd: {
         host: 'api.factomd.net',
         port: 443,
         protocol: 'https'
     },
     walletd: {
         host: 'localhost',
         user: 'paul',
         password: 'pass'
     }
});
```

#### createIdentity

[src/digital/factom-identity-manager.js:83-85][69]

Create a new identity on-chain.

##### Parameters

-   `name` **[Array][59]&lt;[string][55]>** Array of strings used as the "name" of the identity.
-   `keys` **([Array][59]&lt;[string][55]> | [number][56])** Either an array of identity keys (available in walletd) or a number. 
    If a number is provided the library creates new keys (see options argument).
-   `ecAddress` **[string][55]** Entry Credit address paying for the entry. 
    If a public EC address is provided the library attempts to retrieve the secret part from walletd.
-   `options` **[Object][52]?** 
    -   `options.fromWalletSeed` **[boolean][57]?** Relevant only if parameter keys is a number. 
        If true the new keys are generated from walletd (derived from its seed) and the new keys are automatically stored in walletd.
        If false the new keys are generated randomly and are _not_ automatically stored in walletd, it is user responsability to manage the new keys returned by the function.

#### getActivePublicIdentityKeys

[src/digital/factom-identity-manager.js:51-53][70]

Get all the active public identity keys of an identity at a given blockchain height.
If no block height is specified, check for the latest block height.

##### Parameters

-   `identityChainId` **[string][55]** Identity chain id.
-   `blockHeight` **[number][56]?** Specific blockchain height. If not provided check for the latest block.

Returns **[Array][59]&lt;[string][55]>** Array of public identity keys active for the identity.

#### getSecretIdentityKey

[src/digital/factom-identity-manager.js:39-41][71]

Fetch corresponding identity key from the wallet if necessary.

##### Parameters

-   `idKey` **[string][55]** Identity key.

Returns **[string][55]** Corresponsing secret identity key.

#### isIdentityKeyActive

[src/digital/factom-identity-manager.js:64-66][72]

Check if an identity key is (was) active for an identity at a given blockchain height.
If no block height is specified, check for the latest block height.

##### Parameters

-   `identityChainId` **[string][55]** Identity chain id.
-   `idKey` **[string][55]** Public or private identity key.
-   `blockHeight` **[number][56]?** Specific blockchain height. If not provided check for the latest block.

Returns **[boolean][57]** True if the identity key is active for the identity.

#### replaceIdentityKey

[src/digital/factom-identity-manager.js:100-102][73]

Replace an identity key by another on-chain.

##### Parameters

-   `identityChainId` **[string][55]** Identity chain id.
-   `keys` **[Object][52]** 
    -   `keys.oldIdKey` **[string][55]** Old public identity key to replace.
    -   `keys.newIdKey` **[string][55]** New public identity key to take the place of oldIdKey.
    -   `keys.signingIdKey` **[string][55]** Identity key signing for the replacement. Must be of a higher priority than oldIdKey.
        If a public identity key is provided the library attempts to retrieve the secret part from walletd.
-   `ecAddress` **[string][55]** Entry Credit address paying for the entry. 
    If a public EC address is provided the library attempts to retrieve the secret part from walletd.

Returns **{txId: [string][55], repeatedCommit: [boolean][57], chainId: [string][55], entryHash: [string][55]}** Info about the Entry insertion.

### extractCryptoMaterial

[src/digital/key-helpers.js:69-74][74]

Extract the ed25519 cryptographic material encapsulated in the identity key.

#### Parameters

-   `idKey` **[string][55]** Public or secret identity key.

Returns **[Buffer][66]** Either the ed25519 32-byte public key or the 32-byte secret seed.

### generateRandomIdentityKeyPair

[src/digital/key-helpers.js:130-137][75]

Generate a random identity key pair.

### getPublicIdentityKey

[src/digital/key-helpers.js:82-92][76]

Get the public identity key corresponding to the input identity key.

#### Parameters

-   `idKey` **[string][55]** Secret (or public) identity key.

Returns **[string][55]** Corresponding public identity key.

### isValidIdentityKey

[src/digital/key-helpers.js:16-40][77]

Check if an identity key is well formed.

#### Parameters

-   `idKey` **[string][55]** Public or secret identity key.

Returns **[boolean][57]** True if the identity key is valid.

### isValidPublicIdentityKey

[src/digital/key-helpers.js:48-50][78]

Check if a public identity key is well formed.

#### Parameters

-   `pubIdKey` **[string][55]** Public identity key.

Returns **[boolean][57]** True if the public identity key is valid.

### isValidSecretIdentityKey

[src/digital/key-helpers.js:58-60][79]

Check if a secret identity key is well formed.

#### Parameters

-   `secIdKey` **[string][55]** Public identity key.

Returns **[boolean][57]** True if the secret identity key is valid.

### keyToPublicIdentityKey

[src/digital/key-helpers.js:100-102][80]

Convert a 32-byte key to a public identity key.

#### Parameters

-   `key` **([string][55] \| [Buffer][66])** 32-byte key.

Returns **[string][55]** Public identity key.

### seedToSecretIdentityKey

[src/digital/key-helpers.js:110-112][81]

Convert a 32-byte seed to a secret identity key.

#### Parameters

-   `seed` **([string][55] \| [Buffer][66])** 32-byte seed.

Returns **[string][55]** Secret identity key.

[1]: #server

[2]: #factomserveridentitymanager

[3]: #parameters

[4]: #examples

[5]: #addcoinbasecancel

[6]: #parameters-1

[7]: #getserveridentity

[8]: #parameters-2

[9]: #getserveridentityhistory

[10]: #parameters-3

[11]: #updatecoinbaseaddress

[12]: #parameters-4

[13]: #updateefficiency

[14]: #parameters-5

[15]: #generatecoinbaseaddressupdateentry

[16]: #parameters-6

[17]: #generatecoinbasecancelentry

[18]: #parameters-7

[19]: #generateefficiencyupdateentry

[20]: #parameters-8

[21]: #digital

[22]: #factomidentitymanager

[23]: #parameters-9

[24]: #examples-1

[25]: #createidentity

[26]: #parameters-10

[27]: #getactivepublicidentitykeys

[28]: #parameters-11

[29]: #getsecretidentitykey

[30]: #parameters-12

[31]: #isidentitykeyactive

[32]: #parameters-13

[33]: #replaceidentitykey

[34]: #parameters-14

[35]: #extractcryptomaterial

[36]: #parameters-15

[37]: #generaterandomidentitykeypair

[38]: #getpublicidentitykey

[39]: #parameters-16

[40]: #isvalididentitykey

[41]: #parameters-17

[42]: #isvalidpublicidentitykey

[43]: #parameters-18

[44]: #isvalidsecretidentitykey

[45]: #parameters-19

[46]: #keytopublicidentitykey

[47]: #parameters-20

[48]: #seedtosecretidentitykey

[49]: #parameters-21

[50]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/index.js#L6-L6 "Source code on GitHub"

[51]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/factom-server-identity-manager.js#L27-L88 "Source code on GitHub"

[52]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[53]: https://factomjs.luciap.ca/#connectionoptions

[54]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/factom-server-identity-manager.js#L85-L87 "Source code on GitHub"

[55]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[56]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[57]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[58]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/factom-server-identity-manager.js#L38-L40 "Source code on GitHub"

[59]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[60]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/factom-server-identity-manager.js#L48-L50 "Source code on GitHub"

[61]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/factom-server-identity-manager.js#L60-L62 "Source code on GitHub"

[62]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/factom-server-identity-manager.js#L72-L74 "Source code on GitHub"

[63]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/coinbase-address.js#L95-L107 "Source code on GitHub"

[64]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/coinbase-cancel.js#L41-L78 "Source code on GitHub"

[65]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/server/efficiency.js#L97-L115 "Source code on GitHub"

[66]: https://nodejs.org/api/buffer.html

[67]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/index.js#L5-L5 "Source code on GitHub"

[68]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/factom-identity-manager.js#L28-L103 "Source code on GitHub"

[69]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/factom-identity-manager.js#L83-L85 "Source code on GitHub"

[70]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/factom-identity-manager.js#L51-L53 "Source code on GitHub"

[71]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/factom-identity-manager.js#L39-L41 "Source code on GitHub"

[72]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/factom-identity-manager.js#L64-L66 "Source code on GitHub"

[73]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/factom-identity-manager.js#L100-L102 "Source code on GitHub"

[74]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L69-L74 "Source code on GitHub"

[75]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L130-L137 "Source code on GitHub"

[76]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L82-L92 "Source code on GitHub"

[77]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L16-L40 "Source code on GitHub"

[78]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L48-L50 "Source code on GitHub"

[79]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L58-L60 "Source code on GitHub"

[80]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L100-L102 "Source code on GitHub"

[81]: https://git@github.com/:PaulBernier/factom-identity/blob/afcd809bb266807af8d879b788599313b8b1bc56/src/digital/key-helpers.js#L110-L112 "Source code on GitHub"
